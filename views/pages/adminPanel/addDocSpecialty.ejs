<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>admin Approve Doctors</title>

  <link rel="stylesheet" href="/css/sideBar/sidebar.css" />
  <link rel="stylesheet" href="/css/adminPanel/adminApproveDoc.css" />
</head>

<body>
  <%- include('../../common/adminSideBar') %>

    <div class="a2-approve-table-div">
      <div class="container">
        <p class="a2-back-btn a2-btn">
          <img src="/assets/adminPanel/icons/back-iceblue.svg" alt="Back" />
          Back
        </p>

        <h2 class="a2-approve-h2">All Doctors Specialties</h2>

        <table class="a2-approve-table">
          <tr class="approve-tbl-head">
            <th>No.</th>
            <th>Specialty Name</th>
            <th>Delete</th>
          </tr>
          <tbody id="a2-tbody"></tbody>
        </table>

        <h2 class="a2-approve-h2">Pending Request</h2>

        <table class="a2-approve-table">
          <tr class="approve-tbl-head">
            <th>No.</th>
            <th>Specialty Name</th>
            <th>Doctor Name</th>
            <th>Add Specialty</th>
          </tr>
          <tbody id="a2-tbody">
            <tr>
              <td>1.</td>
              <td>ABC</td>
              <td>ABC</td>
              <td class="a2-btn">Add</td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>

    <script>
      async function getSpecialties() {
        let response = await fetch("/get-specialties");

        return await response.json();
      }

      function addNewSpecialty() {
        let div = document.createElement("div");

        let str = `
        <div class="a2-specialties">
          <label for="specialties">New Doctor Specialties : </label>
          <input type="text" name="specialties">
        </div>`;

        div.innerHTML = str;
        document.getElementById("a2-form-id").appendChild(div);
      }

      async function makeSpecialtiesTable() {
        let allSpecialties = await getSpecialties();

        const tbody = document.getElementById("a2-tbody");

        allSpecialties.forEach((specialties) => {
          let strTD = `<tr>
            <td>${specialties.id}</td> 
            <td>${specialties.speciality}</td>
            <td class="a2-btn" onclick=deleteSpecialty(${specialties.id})>Delete</tr>`
          tbody.innerHTML += strTD;
        });

      }

      async function deleteSpecialty(id) {
        try {
          let response = await fetch('/delete-specialty', {
            method: 'post',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ "id": id })
          });
          console.log(id);
        } catch (error) {
          console.log(error);
        }

      }
      makeSpecialtiesTable();
      
    </script>
</body>

</html>